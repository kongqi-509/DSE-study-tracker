<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ§© LocalStorage Debug</title>
<style>
body {
  font-family: "Noto Sans TC", sans-serif;
  background:#f8f9fa;
  padding:20px;
  color:#222;
}
h1 {
  color:#007bff;
  text-align:center;
}
#result {
  margin-top:20px;
  padding:15px;
  border-radius:8px;
  background:#fff;
  box-shadow:0 2px 5px rgba(0,0,0,0.1);
}
.pass { border-left:8px solid #28a745; }
.fail { border-left:8px solid #dc3545; }
pre {
  background:#f0f0f0;
  padding:10px;
  border-radius:4px;
  overflow:auto;
}
button{
  margin-top:10px;
  padding:6px 10px;
  border:1px solid #ccc;
  border-radius:5px;
  background:white;
}
</style>
</head>
<body>
<h1>ğŸ§© LocalStorage Debug å·¥å…·</h1>

<div id="result">æª¢æ¸¬ä¸­...</div>

<script>
(function(){
  const res = document.getElementById("result");
  const key = "todaySuggestion";
  const todayStr = new Date().toLocaleDateString("zh-HK");
  const data = localStorage.getItem(key);
  
  if(data){
    let json;
    try{ json = JSON.parse(data); }catch(e){ json = null; }
    const sameToday = json && json.date === todayStr;
    let html = `<h2>çµæœï¼šâœ… å¯è®€åˆ° localStorage</h2>`;
    html += `<p><b>æ—¥æœŸæ¯”å°ï¼š</b> ${sameToday ? "âœ” ä»Šæ—¥è³‡æ–™" : "âš  ä¸æ˜¯ä»Šæ—¥è³‡æ–™"}</p>`;
    html += `<p><b>å…§å®¹ï¼š</b></p><pre>${data}</pre>`;
    res.className = "pass";
    res.innerHTML = html;
  } else {
    res.className = "fail";
    res.innerHTML = `<h2>çµæœï¼šâŒ è®€ä¸åˆ° localStorage è³‡æ–™</h2>
    <p>è«‹å…ˆé–‹å•Ÿ <code>plan.html</code> åŒæ­¥è³‡æ–™ï¼Œæˆ–ç¢ºèª <code>index.html</code>ã€<code>plan.html</code> æ˜¯å¦åœ¨åŒè³‡æ–™å¤¾ã€‚</p>
    <button onclick="window.open('plan.html','_blank')">é–‹å•Ÿ plan.html</button>`;
  }
})();
</script>
</body>
</html>
